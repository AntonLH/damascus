apply plugin: 'java'
apply plugin: 'groovy'
apply plugin: 'eclipse'
apply plugin: 'idea'

sourceCompatibility = 1.8
targetCompatibility = 1.8

//Need for Windows
def defaultEncoding = 'UTF-8'

repositories {
    mavenCentral()
    jcenter()
    maven {
        url 'https://repo.gradle.org/gradle/libs-releases'
        url "http://repository.jboss.org/nexus/content/groups/public-jboss" // JBoss
        url "http://repository.apache.org/content/groups/public"            // Apache
        url "http://repository.springsource.com/maven/bundles/release"      // SpringSource
        url "http://repository.codehaus.org"                                // Codehaus
        url "http://download.java.net/maven/2"                              // Java.NET
        url "http://download.java.net/maven/glassfish"                      // Glassfish
        url "http://m2repo.spockframework.org/snapshots"                    // Spock Snapshot
        url "http://repository.sonatype.org/content/groups/public"
    }
}

jar {
    manifest {
        attributes(
            "Bundle-SymbolicName": "com.liferay.damascus.cli",
            "Bundle-Version": "1.0.0",
            "Bundle-Description": "Liferay extension tool for scaffolding service builder portlet",
            "Main-Class": "com.liferay.damascus.cli.Damascus",
            "JPM-Command": "damascus"
        )
    }
    from {
        configurations.runtime.collect { it.isDirectory() ? it : zipTree(it) }
    }
}

dependencies {
    compile 'com.beust:jcommander:1.72'
    compile 'com.google.guava:guava:22.0'
    compile 'commons-io:commons-io:2.5'
    compile 'org.apache.commons:commons-lang3:3.6'
    compile 'org.apache.commons:commons-configuration2:2.1.1'
    compile 'commons-beanutils:commons-beanutils:1.9.3'

    compile 'org.freemarker:freemarker:2.3.26-incubating'
    compile 'com.liferay:com.liferay.project.templates:latest.release'
    compile 'org.slf4j:slf4j-api:1.7.25'
    compile 'org.slf4j:slf4j-log4j12:1.7.25'
    compile 'com.fasterxml.jackson.core:jackson-core:2.9.0'
    compile 'com.fasterxml.jackson.core:jackson-databind:2.9.0'
    compile 'com.fasterxml.jackson.core:jackson-annotations:2.9.0'
    compile 'com.fasterxml.jackson.datatype:jackson-datatype-joda:2.9.0'
    compile 'joda-time:joda-time:2.9.7'
    compile 'org.projectlombok:lombok:1.16.18'
    compile 'org.gradle:gradle-tooling-api:4.0.2'
    compile 'org.codehaus.groovy:groovy-all:latest.release'

    testCompile group: 'cglib', name: 'cglib-nodep', version:'latest.release'
    testCompile group: 'junit', name: 'junit', version:'4.12'

    testCompile group: 'org.hamcrest', name: 'hamcrest-core', version:'latest.release'
    testCompile group: 'org.objenesis', name: 'objenesis', version:'latest.release'
    testCompile group: 'org.mockito', name: 'mockito-core', version: '1.10.19'
    testCompile group: 'org.powermock', name: 'powermock-core', version: '1.6.6'
    testCompile group: 'org.powermock', name: 'powermock-classloading-xstream', version:'1.6.6'
    testCompile group: 'org.powermock', name: 'powermock-module-junit4', version:'1.6.6'
    testCompile group: 'org.powermock', name: 'powermock-module-junit4-common', version:'1.6.6'
    testCompile group: 'org.powermock', name: 'powermock-module-junit4-rule', version:'1.6.6'
    testCompile group: 'org.powermock', name: 'powermock-api-mockito', version: '1.6.6'
    testCompile group: 'org.powermock', name: 'powermock-api-mockito-common', version: '1.6.6'
    testCompile('org.spockframework:spock-core:1.1-groovy-2.4') {
        exclude module: 'groovy-all'
    }
}

test {
    testLogging.showStandardStreams = true
}